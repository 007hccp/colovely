window.app=function(t){"use strict";var e=function(){this.elements=null,this.touch=null,this.init(),this.addEvents()};return e.prototype.init=function(){var t=hash.get("hex");this.elements={madeHeart:$(".heart use"),history:$("header .history"),made:$(".made a"),main:$("main"),hsl:$(".hsl"),hex:$(".hex"),rgb:$(".rgb")},colorStore.init(this.elements.history),color.regHEX.test(t)&&this.changeColor(color.HEXTORGB(t),!0)},e.prototype.addEvents=function(){document.addEventListener("keydown",this.onKDown.bind(this)),document.addEventListener("touchstart",this.onTouchStart.bind(this)),document.addEventListener("touchend",this.onTouchEnd.bind(this))},e.prototype.setBackgroundColor=function(t){this.elements.main.style.backgroundColor=color.formatRGB(t)},e.prototype.setElementsColor=function(t){this.elements.made.style.color=t,this.elements.madeHeart.style.stroke=t,this.elements.hsl.style.color=t,this.elements.hex.style.color=t,this.elements.rgb.style.color=t},e.prototype.updateValues=function(t){this.elements.hsl.innerHTML=color.formatHSL(t),this.elements.hex.innerHTML=color.formatHEX(t),this.elements.rgb.innerHTML=color.formatRGB(t)},e.prototype.changeColor=function(t,e){var o=this,n=[color.toHSL(!0),color.toRGB(!0)];color.rgb(t.r,t.g,t.b),n.push(color.toHSL(!0),color.toRGB(!0)),n[2].l<55?(this.setElementsColor("#fff"),this.elements.made.className=""):(this.setElementsColor("#222"),this.elements.made.className="black"),tn({r:[n[1].r,n[3].r],g:[n[1].g,n[3].g],b:[n[1].b,n[3].b],h:[n[0].h,n[2].h],s:[n[0].s,n[2].s],l:[n[0].l,n[2].l]},{duration:600,before:function(){hash.set("hex",color.formatHEX(n[3]).slice(1)),hash.update(),e&&colorStore.add(color.formatHEX(n[3]).slice(1))},change:function(t){o.setBackgroundColor(t),o.updateValues(t)}})},e.prototype.onKDown=function(t){var e=t.keyCode||t.charCode||t.witch;if(t.preventDefault(),32==e)this.changeColor({r:util.rand(0,255),g:util.rand(0,255),b:util.rand(0,255)},!0);else if(65==e||37==e||68==e||39==e){var o=65==e||37==e?colorStore.position-1:colorStore.position+1;colorStore.setFocus(o)}},e.prototype.onTouchStart=function(t){this.touch=t.changedTouches[0]},e.prototype.onTouchEnd=function(t){var e=t.changedTouches[0],o=Math.abs(this.touch.clientX-e.clientX);o>80&&(this.touch.clientX>e.clientX?this.changeColor({r:util.rand(0,255),g:util.rand(0,255),b:util.rand(0,255)},!0):colorStore.setFocus(colorStore.position-1))},new e}(this),window.color=function(t){"use strict";function e(t,e,o){return 0>o&&(o+=1),o>1&&(o-=1),1/6>o?t+6*(e-t)*o:.5>o?e:2/3>o?t+(e-t)*(2/3-o)*6:t}var o=/^hsl\(( ?[\d]{1,3}\, ?[\d]{1,3}\%\, ?[\d]{1,3}\%)\)/i,n=/\#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})/i,r=/^rgb\(( ?[\d]{1,3}\, ?[\d]{1,3}\, ?[\d]{1,3})\)/i,i=function(t){t=t||{},this.r=0,this.g=0,this.b=0};i.prototype.rgb=function(t,e,o){this.r=t,this.g=e,this.b=o},i.prototype.hsl=function(t,o,n){if(0!=o){var r=1+o-1*o,i=2-r;this.rgb(Math.round(255*e(i,r,t+1/3)),Math.round(255*e(i,r,t)),Math.round(255*e(i,r,t-1/3)))}else this.rgb(255,255,255)},i.prototype.fromHSL=function(t){return o.test(t)?(t=val.match(o),void this.hsl(+t[1],+t[2],+t[3])):!1},i.prototype.fromHEX=function(t){var e=this.HEXTORGB(t);e&&this.rgb(e.r,e.g,e.b)},i.prototype.fromRGB=function(t){return r.test(t)?(t=t.match(r),void this.rgb(+t[1],+t[2],+t[3])):!1},i.prototype.toString=function(t){switch(t){case"hsl":return this.toHSL();case"hex":return this.toHEX();case"rgb":default:return this.toRGB()}},i.prototype.toHSL=function(t){var e,o,n,r,i,h,u,a;switch(e=this.r/255,o=this.g/255,n=this.b/255,u=Math.min(e,o,n),a=Math.max(e,o,n),h=(a+u)/2,a==u?(i=0,r=Number.NaN):i=.5>h?(a-u)/(a+u):(a-u)/(2-a-u),a){case e:r=(o-n)/(a-u);break;case o:r=2+(n-e)/(a-u);break;case n:r=4+(e-o)/(a-u)}return r*=60,r+=0>r?360:0,t?{h:0^r,s:100*i^0,l:100*h^0}:s.formatHSL(0^r,100*i^0,100*h^0)},i.prototype.toHEX=function(t){return t?[util["byte"](this.r),util["byte"](this.g),util["byte"](this.b)]:"#"+util["byte"](this.r)+util["byte"](this.g)+util["byte"](this.b)},i.prototype.toRGB=function(t){return t?{r:this.r,g:this.g,b:this.b}:s.formatRGB(this.r,this.g,this.b)};var s=new i;return s.HEXTORGB=function(t){if(!n.test(t))return!1;t=t.match(n);for(var e=1;e<t.length;e++)2!=t[e].length&&(t[e]+=t[e]);return{r:+("0x"+t[1]),g:+("0x"+t[2]),b:+("0x"+t[3])}},s.formatHSL=function(t){return"hsl("+(0^t.h)+", "+(0^t.s)+"%, "+(0^t.l)+"%)"},s.formatHEX=function(t){return"#"+util["byte"](0^t.r)+util["byte"](0^t.g)+util["byte"](0^t.b)},s.formatRGB=function(t){return"rgb("+(0^t.r)+", "+(0^t.g)+", "+(0^t.b)+")"},s.regHSL=o,s.regHEX=n,s.regRGB=r,s}(this);var colorStore=function(t){"use strict";var e=function(){this.elements=[],this.position=0,this.maxCount=150,this.count=0};return e.prototype.init=function(t){for(var e=0;e<this.maxCount;e++)this.elements.push(document.createElement("a")),this.elements[e].addEventListener("mouseup",this.onClick.bind(this)),this.elements[e].setAttribute("data-index",e),this.elements[e].className="hide",t.appendChild(this.elements[e])},e.prototype.add=function(t){this.position>0&&(this.elements[this.position].className=""),this.position==this.count&&this.count++,this.count>this.maxCount-1&&(this.position=0,this.count=this.maxCount-1),this.elements[this.position%this.count+1].className="focus",this.setColor(this.position%this.count+1,t),this.position++},e.prototype.getColor=function(t){return this.elements[t].getAttribute("data-color")},e.prototype.setColor=function(t,e){this.elements[t].setAttribute("data-color",e),this.elements[t].style.background="#"+e,this.elements[t].href="#hex="+e},e.prototype.setFocus=function(t){t=this._pos(t),this.elements[this.position].className="",this.elements[t].className="focus",this.position=t,app.changeColor(color.HEXTORGB(this.getColor(t))),hash.set("hex",this.getColor(t))},e.prototype._pos=function(t){return t>this.count?1:1>t?this.count:t},e.prototype.onClick=function(t){var e=t.target||t.srcElement;this.setFocus(+e.getAttribute("data-index"))},new e}(this),hash=function(t){"use strict";var e=function(){this.hashes={},t.addEventListener("hashchange",this.onChange.bind(this)),this.parse()};return e.prototype.get=function(t,e){return this.hashes.hasOwnProperty(t)?this.hashes[t]:e||!1},e.prototype.set=function(t,e){return this.hashes[t]=e,this},e.prototype.parse=function(){var t=location.href.split("#"),e=null;if(t.length<1&&t[1].length<1)return!1;for(var o=1,n=t.length;n>o;o++)e=t[o].split("="),this.hashes[e[0]]=e[1];return this},e.prototype.update=function(){return location.assign(location.origin+location.pathname+this.format()),this},e.prototype.format=function(){var t="";for(var e in this.hashes)t+="#"+e+"="+this.hashes[e];return t},e.prototype.onChange=function(t){this.parse()},new e}(this);window.util=function(t){"use strict";function e(t,e){return t+(Math.random()*e+1-t)}function o(t,o){return 0^e(t,o)}function n(t){return 15>=t?"0"+t.toString(16):t.toString(16)}return t.$=function(t,e){return e?e.querySelector(t):document.querySelector(t)},t.$$=function(t,e){return e?e.querySelectorAll(t):document.querySelectorAll(t)},t.$id=function(t,e){return e?e.getElementById(t):document.getElementById(t)},{frand:e,rand:o,"byte":n}}(this),function(t,e){"function"==typeof define&&define.amd?define(["tactween"],e):"object"==typeof module&&module.exports?module.exports=e(t):t.tn=t.tactween=e(t)}(this,function(t){"use strict";var e=function(t){return"isArray"in Array?Array.isArray(t):"[object Array]"==Object.prototype.toString.call(t)},o=function(){var e=Date.now();return"performance"in t?function(){return performance.now()}:function(){return Date.now()-e}}(),n=t.requestAnimationFrame||function(t){setTimeout(function(){t(o())},20)},r=function(t,i){t=t||{},i=i||{};var s=i.duration||1e3,h=i.timing||function(t){return t},u=0,a={},c=0,l=o();if("number"==typeof t)t={value:[0,t]};else if(e(t)){if(2!=t.length)throw"Array may comprise only two elements.";t={value:t}}else if("object"!=typeof t)throw"Props may comprise only Number, Array or Object.";return i.before&&i.before(),u=n(function f(e){var o=(e-l)/s;o>1&&(o=1),c=h(o);for(var r in t)a[r]=t[r][0]+c*(t[r][1]-t[r][0]);i.change&&i.change(a),1==o&&i.complete&&i.complete(a),1>o&&(u=n(f))}),{tactween:r,more:r,uid:u}};return r});